<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="description" content="">
	<meta name="author" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
	<title>Potree Viewer</title>

	<link rel="stylesheet" type="text/css" href="./libs/potree/potree.css">
	<link rel="stylesheet" type="text/css" href="./libs/jquery-ui/jquery-ui.min.css">
	<link rel="stylesheet" type="text/css" href="./libs/openlayers3/ol.css">
	<link rel="stylesheet" type="text/css" href="./libs/spectrum/spectrum.css">
	<link rel="stylesheet" type="text/css" href="./libs/jstree/themes/mixed/style.css">
</head>

<body>
	<script src="./libs/jquery/jquery-3.1.1.min.js"></script>
	<script src="./libs/spectrum/spectrum.js"></script>
	<script src="./libs/jquery-ui/jquery-ui.min.js"></script>
	<script src="./libs/three.js/build/three.min.js"></script>
	<script src="./libs/three.js/extra/lines.js"></script>
	<script src="./libs/other/BinaryHeap.js"></script>
	<script src="./libs/tween/tween.min.js"></script>
	<script src="./libs/d3/d3.js"></script>
	<script src="./libs/proj4/proj4.js"></script>
	<script src="./libs/openlayers3/ol.js"></script>
	<script src="./libs/i18next/i18next.js"></script>
	<script src="./libs/jstree/jstree.js"></script>
	<script src="./libs/potree/potree.js"></script>
	<script src="./libs/plasio/js/laslaz.js"></script>

	<!-- INCLUDE ADDITIONAL DEPENDENCIES HERE -->


	<div class="potree_container" style="position: absolute; width: 100%; height: 100%; left: 0px; top: 0px; ">
		<div id="potree_render_area" style="background-image: url('./libs/potree/resources/images/background.jpg');"></div>
		<div id="potree_sidebar_container"> </div>
	</div>

	<script>

		window.viewer = new Potree.Viewer(document.getElementById("potree_render_area"));

		viewer.setEDLEnabled(false);
		viewer.setFOV(60);
		viewer.setPointBudget(1*10000*10000);
		document.title = "";
		//viewer.setEDLEnabled(false);
		viewer.setBackground("skybox"); // ["skybox", "gradient", "black", "white"];
		viewer.setDescription(``);
		viewer.loadSettingsFromURL();

		viewer.setDescription("");

		viewer.loadGUI(() => {
			viewer.setLanguage('jp');
		//	$("#menu_appearance").next().show();
		//	$("#menu_tools").next().show();
		//	$("#menu_clipping").next().show();
			$("#menu_classification").hide();
			//viewer.toggleSidebar();
		});

		Potree.loadPointCloud("https://www.cerd.osaka-cu.ac.jp/vKishiwadajo-latest/pointclouds/honmaru/metadata.json", "本丸", e => {
			let scene = viewer.scene;
			let pointcloud = e.pointcloud;

			let material = pointcloud.material;
			material.size = 1;
			material.pointSizeType = Potree.PointSizeType.ATTENUATED;
			material.shape = Potree.PointShape.CIRCLE;
			material.activeAttributeName = "rgba";
			viewer.useHQ = true;

			scene.addPointCloud(pointcloud);
		viewer.scene.view.position.set(-57782.458, -170771.635, 57.045);
		viewer.scene.view.lookAt(-57814.479, -170780.425, 23.558);

		});

		Potree.loadPointCloud("https://www.cerd.osaka-cu.ac.jp/vKishiwadajo-latest/pointclouds/others/metadata.json", "other", e => {
			let scene = viewer.scene;
			let pointcloud = e.pointcloud;

			let material = pointcloud.material;
			material.size = 1;
			material.pointSizeType = Potree.PointSizeType.ATTENUATED;
			material.shape = Potree.PointShape.CIRCLE;
			material.activeAttributeName = "rgba";
			viewer.useHQ = true;

			scene.addPointCloud(pointcloud);

		});


	</script>

	<script>

		const animation = new Potree.CameraAnimation(viewer);

		const positions = [
		//	[-57784.520, -170781.857, 71.595],
		[-57827.617, -170776.175, 145.502],
		[-57904.794, -170704.597, 97.611],
		[-57923.811, -170677.747, 29.396],
		[-57884.418, -170718.055, 19.766],
		[-57900.676, -170733.563, 18.177],
		[-57914.233, -170770.620, 18.979],
			[-57893.063, -170828.172, 21.832],
			[-57839.196, -170863.666, 19.488],
			[-57780.187, -170857.197, 18.629],
			[-57747.660, -170825.523, 19.059],
			[-57749.030, -170764.947, 17.424],
			[-57775.970, -170729.385, 19.141],
			[-57804.876, -170710.383, 19.397],
			[-57854.931, -170700.149, 14.149],
		　[-57898.697, -170709.897, 22.261],
			[-57874.070, -170725.297, 15.290],
			[-57869.392, -170730.804, 12.198],
			[-57864.916, -170735.000, 11.485],
			[-57859.717, -170741.802, 11.282],
			[-57857.963, -170746.737, 11.011],
			[-57852.087, -170742.534, 11.367],
			[-57849.673, -170735.437, 12.433],
			[-57835.992, -170739.001, 14.091],
			[-57832.486, -170742.634, 14.739],
			[-57827.477, -170756.696, 14.263],
			[-57824.499, -170757.039, 14.249],
			[-57823.996, -170758.269, 14.180],
			[-57821.308, -170767.557, 14.831],
			[-57816.353, -170769.565, 15.936],
			[-57809.521, -170773.728, 17.959],
			[-57808.111, -170775.425, 17.854],
			[-57807.658, -170773.572, 18.415],
			[-57805.229, -170776.480, 18.444],
			[-57809.126, -170783.765, 19.935],

		];

		const targets = [
	//		[-57811.910, -170783.119, 33.495],
	[-57827.617, -170776.175, 5.880],
		 [-57843.070, -170778.341, 21.068],
		 [-57827.617, -170776.175, 5.880],
		 [-57827.617, -170776.175, 5.880],
		 [-57843.874, -170791.684, 4.291],
		 [-57841.302, -170777.130, 6.958],
			[-57841.302, -170777.130, 6.958],
			[-57816.620, -170801.911, 7.811],
			[-57806.982, -170796.992, 7.811],
			[-57806.982, -170796.992, 7.811],
			[-57812.121, -170784.214, 7.036],
			[-57812.121, -170784.214, 7.036],
			[-57841.027, -170765.212, 7.293],
			[-57846.411, -170765.814, 5.485],
			[-57861.573, -170738.570, 12.337],
			[-57861.799, -170739.067, 11.647],
			[-57859.652, -170739.993, 11.315],
			[-57853.160, -170746.030, 12.251],
			[-57855.146, -170743.845, 11.697],
			[-57844.765, -170734.578, 12.640],
			[-57814.942, -170759.049, 9.832],
			[-57828.348, -170746.734, 13.557],
			[-57830.479, -170748.050, 15.084],
			[-57826.169, -170758.445, 14.310],
			[-57826.169, -170758.445, 14.310],
			[-57826.169, -170758.445, 14.310],
			[-57820.691, -170765.284, 14.119],
			[-57818.518, -170769.111, 14.817],
			[-57810.307, -170772.773, 16.831],
			[-57804.536, -170776.972, 17.933],
			[-57806.918, -170773.160, 17.826],
			[-57805.925, -170779.292, 18.045],
			[-57806.123, -170778.330, 18.343],
			[-57817.397, -170796.856, 19.076],

		];

		for(let i = 0; i < positions.length; i++){
			const cp = animation.createControlPoint();

			cp.position.set(...positions[i]);
			cp.target.set(...targets[i]);
		}

		viewer.scene.addCameraAnimation(animation);

	</script>



  </body>
</html>
